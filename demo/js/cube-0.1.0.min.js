/*! cube-0.1.0 2014-10-15 */
var CUBE={};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=CUBE),exports.Matter=Matter),"function"==typeof define&&define.amd&&define("CUBE",[],function(){return CUBE}),"object"==typeof window&&"object"==typeof window.document&&(window.CUBE=CUBE),function(a){a.Circle=function(b,c,d){this.center=a.Vector.clone(b),this.radius=c,this.velocity=a.Vector.clone(d)||a.Vector.build(0,0)},a.Circle.prototype.box=function(){return{w:this.center.x-this.radius,n:this.center.y-this.radius,e:this.center.x+this.radius,s:this.center.y+this.radius}},a.Circle.prototype.mass=function(){return 2*Math.PI*this.radius}}(CUBE),function(a,b){a.QuadTree=function(a,c){this.box=a,this.lev=c||0,this.ver=a.n+(a.s-a.n)/2,this.hor=a.w+(a.e-a.w)/2,this.nw=b,this.ne=b,this.se=b,this.sw=b,this.objs=[]},a.QuadTree.prototype.insert=function(c,d){for(var e=d||c.box(),f=this;f!==b;){var g={n:f.box.n,s:f.ver,w:f.box.w,e:f.hor},h={n:f.box.n,s:f.ver,w:f.hor,e:f.box.e},i={n:f.ver,s:f.box.s,w:f.hor,e:f.box.e},j={n:f.ver,s:f.box.s,w:f.box.w,e:f.hor};a.QuadTree.contains(g,e)?(f.nw=f.nw||new a.QuadTree(g,f.lev+1),f=f.nw):a.QuadTree.contains(h,e)?(f.ne=f.ne||new a.QuadTree(h,f.lev+1),f=f.ne):a.QuadTree.contains(i,e)?(f.se=f.se||new a.QuadTree(i,f.lev+1),f=f.se):a.QuadTree.contains(j,e)?(f.sw=f.sw||new a.QuadTree(j,f.lev+1),f=f.sw):(c.quad=f,f.objs.push(c),f=b)}return this},a.QuadTree.prototype.update=function(a,c){var d=(c||a.box(),a.quad),e=d.objs.indexOf(a);return e>=0&&d.objs.splice(e,1),a.quad=b,this.insert(a),this},a.QuadTree.prototype.clear=function(){for(var a=[this];a.length>0;){var b=a.pop();b.objs=[],b.nw&&a.push(b.nw),b.ne&&a.push(b.ne),b.se&&a.push(b.se),b.sw&&a.push(b.sw)}return this},a.QuadTree.prototype.select=function(b,c){for(var d=c||b.box(),e=[],f=[this];f.length>0;){var g=f.pop();if(a.QuadTree.contains(g.box,d)){for(var h=0;h<g.objs.length;h++){var i=g.objs[h];i!==b&&a.QuadTree.overlap(i.box(),d)&&e.push(i)}g.nw&&f.push(g.nw),g.ne&&f.push(g.ne),g.se&&f.push(g.se),g.sw&&f.push(g.sw)}}return e;var g},a.QuadTree.contains=function(a,b){return a.n<b.n&&a.s>b.s&&a.w<b.w&&a.e>b.e},a.QuadTree.overlap=function(a,b){return(a.n>b.s||a.s<b.n||a.w>b.e||a.e<b.w)==!1}}(CUBE),function(a){a.Util={rand:function(a,b){return a+Math.random()*(b-a)}}}(CUBE),function(a,b){a.Vector={build:function(a,b){return{x:a,y:b}},clone:function(a){return{x:a.x,y:a.y}},neg:function(a,c){var d=c?{x:b,y:b}:a;return d.x=-a.x,d.y=-a.y,d},add:function(a,c,d){var e=d?{x:b,y:b}:a;return e.x=a.x+c.x,e.y=a.y+c.y,e},sub:function(a,c,d){var e=d?{x:b,y:b}:a;return e.x=a.x-c.x,e.y=a.y-c.y,e},mul:function(a,c,d){var e=d?{x:b,y:b}:a;return e.x=a.x*c,e.y=a.y*c,e},div:function(a,c,d){var e=d?{x:b,y:b}:a;return e.x=a.x/c,e.y=a.y/c,e},normal:function(a,c){var d=c?{x:b,y:b}:a,e=this.mag(d);return this.div(d,e,c)},mag:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},dot:function(a,b){return a.x*b.x+a.y*b.y},cross:function(a,b){return a.x*b.y-a.y*b.x}}}(CUBE);